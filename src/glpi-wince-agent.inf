[Version]
Signature = "$Windows NT$"
Provider = "Teclib"
CESignature = "$Windows CE$"

[CEStrings]
AppName = "GLPI-Agent"
; %CE1% = \Program Files\
InstallDir = "%CE1%\%AppName%"

[Strings]
LinkFilename = "GLPI-Agent"
AgentVersion = "__VERSION__"

[CEDevice]
ProcessorType=2577 ; PROCESSOR_STRONGARM
VersionMin = 5.0
VersionMax = 32767.0
; prevent warnings on screen resolution
BuildMax = 0xE0000000

[SourceDisksNames]
1 = ,"Sources",,src

[SourceDisksFiles]
glpi-wince-agent.exe = 1
glpi-wince-agent-setup.dll = 1
glpi-wince-agent-service.dll = 1

[DefaultInstall]
CopyFiles = AgentFile,AgentService
CEShortcuts = Links
AddReg = AddRegistry
CESetupDLL=glpi-wince-agent-setup.dll

[DestinationDirs]
; See https://msdn.microsoft.com/en-us/library/ee504636.aspx for %CEXY%
; Or http://www.cabextract.org.uk/wince_cab_format/
AgentService = 0, %CE2% ; \Windows
AgentFile = 0, %InstallDir%
Links = 0, %CE11% ; "\Windows\Start Menu" directory

[AgentFile]
glpi-wince-agent.exe,glpi-wince-agent.exe,,0x00000002

[AgentService]
glpi-wince-agent-service.dll,glpi-wince-agent-service.dll,,0x00000002

[AddRegistry]
HKLM,\Software\Teclib\GLPI-Agent,InstallDir,0x00000000,%InstallDir%
HKLM,\Software\Teclib\GLPI-Agent,Version,0x00000000,%AgentVersion%
HKLM,\Software\Teclib\GLPI-Agent,KeepFiles,0x00010001,0
HKLM,\Services\GLPI-Agent,Context,0x00010001,1
HKLM,\Services\GLPI-Agent,Description,0x00000000,"GLPI Agent service v%AgentVersion%"
HKLM,\Services\GLPI-Agent,DisplayName,0x00000000,GLPI-Agent
HKLM,\Services\GLPI-Agent,Dll,0x00000000,glpi-wince-agent-service.dll
HKLM,\Services\GLPI-Agent,Flags,0x00010001,0
HKLM,\Services\GLPI-Agent,Index,0x00010001,0
HKLM,\Services\GLPI-Agent,Keep,0x00010001,1
HKLM,\Services\GLPI-Agent,Order,0x00010001,16
HKLM,\Services\GLPI-Agent,Prefix,0x00000000,GWA
HKLM,\Services\GLPI-Agent\Accept\TCP-62354,SockAddr,0x00000001,02,00,92,f3,00,00,00,00,00,00,00,00,00,00,00,00

[Links]
; shortcut to a file, created in the standard destination path %CE11% (/Windows/Start Menu/)
%LinkFilename%,0,"glpi-wince-agent.exe",%CE11%
